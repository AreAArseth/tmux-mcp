# Repository Guidelines

## Project Structure & Module Organization
- `src/` contains the MCP server implementation. `index.ts` wires the server and exposes tools/resources; `tmux.ts` wraps tmux CLI interactions and shared logic.
- `tests/` holds Vitest unit tests. Keep new specs parallel to the source they cover (e.g., `tests/tmux.test.ts` mirrors `src/tmux.ts`).
- `build/` is generated by `npm run build` and should not be edited manually. Add new runtime assets through `src/` and TypeScript compilation.

## Build, Test, and Development Commands
- `npm install` — install Node and TypeScript dependencies.
- `npm run build` — compile TypeScript to `build/` via `tsc`.
- `npm start` — run the compiled server (`build/index.js`) over stdio; useful for local manual checks.
- `npm test` — execute Vitest suites in `tests/`.
- `npm run dev` — watch and recompile TypeScript during development.

## Coding Style & Naming Conventions
- Use TypeScript (ES2022 target) with strict mode enabled; avoid disabling compiler checks.
- Prefer 2-space indentation, trailing commas where TypeScript defaults, and single quotes in string literals for tmux commands.
- Export plain functions and types from modules; keep file-level state (like command maps) encapsulated in the module.
- Name tools and resources with kebab-case strings mirroring their tmux function (e.g., `list-sessions`, `tmux://pane/{paneId}`).

## Testing Guidelines
- Use Vitest with mock-backed tests; see `tests/tmux.test.ts` for mocking `child_process.exec`.
- Name files `*.test.ts` and group by feature. When adding tmux command helpers, add corresponding tests covering success and error pathways.
- Ensure tests pass locally (`npm test`) before submitting; maintain fast, deterministic tests by avoiding real tmux dependencies.

## Commit & Pull Request Guidelines
- Write commit messages in imperative mood (e.g., “Add split-pane helper”) with concise 72-character subject lines; include context in the body if needed.
- Reference related issues using `Fixes #id` when applicable.
- Pull requests should summarize the change, list testing performed (`npm test`, `npm run build`), and note any tmux or environment expectations. Add screenshots or logs only when behavior changes are user-visible.
